# GitHub Actions Workflows

このディレクトリには、Game Centerプロジェクトのワークフローファイルが含まれています。

## 📋 ワークフロー一覧

### 🔧 auto-fix-code.yml
**目的**: コードファイルの自動フォーマット・Lint修正

**トリガー**: 
- PRが`main`ブランチに対して作成・更新された場合
- 対象パス: `src/**`, `*.json`, `*.js`, `*.ts`, `*.tsx`, 設定ファイル等

**処理内容**:
- Prettier によるフォーマット
- ESLint による自動修正
- ワークフローファイルは**除外**（無限ループ防止）

**安全性**: 
- `.github/workflows/**` を明示的に除外
- 変更がある場合のみコミット・プッシュ

### 🛠️ auto-fix-workflows.yml
**目的**: ワークフローファイルの自動フォーマット・検証

**トリガー**: 
- 手動実行のみ（`workflow_dispatch`）
- 慎重な運用のため自動実行は無効

**処理内容**:
- ワークフローファイルのPrettierフォーマット
- YAML構文検証
- 自動的に修正用PRを作成

**安全性**: 
- 手動実行のみ
- 別ブランチでPR作成
- レビュー必須

## 🔄 ワークフロー設計原則

### 責任分離
- **コードファイル**: `auto-fix-code.yml`
- **ワークフローファイル**: `auto-fix-workflows.yml`
- 相互干渉の完全回避

### 安全性
- 無限ループの防止
- 明示的なファイル除外
- 段階的な実行制御

### 運用性
- 明確な実行条件
- 詳細なログ出力
- PR自動作成

## 🚨 注意事項

1. **ワークフローファイル変更時**: 必ず`auto-fix-workflows.yml`を手動実行
2. **新しいファイルタイプ追加時**: `auto-fix-code.yml`の`paths`を更新
3. **権限変更時**: 両ワークフローの`permissions`を同期

## 🔍 トラブルシューティング

### Q: auto-fix-code.ymlが動作しない
A: 対象パスに含まれているか確認。新しいファイルタイプは`paths`に追加が必要。

### Q: ワークフローファイルが修正されない
A: `auto-fix-workflows.yml`を手動実行してください。

### Q: 無限ループが発生する
A: `.github/workflows/**`が適切に除外されているか確認。

---

**最終更新**: 2025-06-22  
**更新者**: auto-fix workflow separation project